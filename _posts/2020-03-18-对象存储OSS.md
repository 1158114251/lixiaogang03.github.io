---
layout:     post
title:      对象存储OSS
subtitle:   阿里云
date:       2020-03-18
author:     LXG
header-img: img/post-bg-alibaba.jpg
catalog: true
tags:
    - aliyun
---

## 对象存储OSS

对象存储服务（Object Storage Service，OSS）是一种海量、安全、低成本、高可靠的云存储服务，适合存放任意类型的文件。容量和处理能力弹性扩展，多种存储类型供选择，全面优化存储成本。

## 图片和音视频等应用的海量存储

OSS可用于图片、音视频、日志等海量文件的存储。各种终端设备、Web网站程序、移动应用可以直接向OSS写入或读取数据。OSS支持流式写入和文件写入两种方式。

![object_oss](/images/aliyun/object_oss.png)

## Android SDK

[aliyun-oss-android-sdk](https://github.com/aliyun/aliyun-oss-android-sdk?spm=a2c4g.11186623.2.10.a5704de3NkjZfU)

```gradle

dependencies {

    implementation 'com.aliyun.dpa:oss-android-sdk:2.9.3'

}

```

## 初始化

OSSClient 是 OSS 服务的 Android 客户端，它为调用者提供了一系列的方法进行操作、管理存储空间（Bucket）和文件（Object）等。
在使用 SDK 发起对 OSS 的请求前，您需要初始化一个 OSSClient 实例，并对它进行一些必要设置。

```java

        OSSAuthCredentialsProvider authCredentialsProvider = new OSSAuthCredentialsProvider(STS_INFO_URL);

        ClientConfiguration conf = new ClientConfiguration();
        conf.setConnectionTimeout(15 * 1000);        // 连接超时，默认15秒。
        conf.setSocketTimeout(15 * 1000);            // socket超时，默认15秒。
        conf.setMaxConcurrentRequest(5);             // 最大并发请求数，默认5个。
        conf.setMaxErrorRetry(2);                    // 失败后最大重试次数，默认2次。

        mClient = new OSSClient(MyApplication.getInstance(), OSS_ENDPOINT, authCredentialsProvider, conf);

```

### Endpoint

Endpoint 是阿里云 OSS 服务在各个区域的地址

### STS鉴权模式

移动终端是一个不受信任的环境，把AccessKeyId和AccessKeySecret直接保存在终端用来加签请求，存在极高的风险。
如果使用STS鉴权模式，推荐使用OSSAuthCredentialsProvider方式直接访问鉴权应用服务器，token过期后可以自动更新。








