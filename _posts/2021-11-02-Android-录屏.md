---
layout:     post
title:      Android 录屏
subtitle:   MediaProjection
date:       2021-11-02
author:     LXG
header-img: img/post-bg-android.jpg
catalog: true
tags:
    - android
---

[Android录屏采集实现](https://xie.infoq.cn/article/dd40cd5d753c896225063f696)

## App

```java

public class RtcActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        MediaProjectionManager mediaProjectionManager =
                (MediaProjectionManager) getApplication().getSystemService(
                        Context.MEDIA_PROJECTION_SERVICE);
        startActivityForResult(
                mediaProjectionManager.createScreenCaptureIntent(), CAPTURE_PERMISSION_REQUEST_CODE);

    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {

	VideoCapturer vc = new ScreenCapturerAndroid(
                mMediaProjectionPermissionResultData, new MediaProjection.Callback() {
            @Override
            public void onStop() {
                report("User revoked permission to capture the screen.");
            }

    }

}

```
